<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>è¨­å®šãƒ»éŠã³æ–¹ãƒ»ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</title>
  <link rel="stylesheet" href="../static/css/setting.css">
</head>
<body>
    <p><a href="/main">â† æˆ»ã‚‹</a></p>

  <div class="tab-container">
    <div class="tab-buttons">
      <button class="tab-btn active" data-tab="settings-tab">è¨­å®š</button>
      <button class="tab-btn" data-tab="howto-tab">éŠã³æ–¹</button>
      <button class="tab-btn" data-tab="credits-tab">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</button>
    </div>

    <div class="tab-content" id="settings-tab">
      <h2>è¨­å®š</h2>
      <div class="setting-item">
        <label for="bgm-volume">BGM éŸ³é‡</label>
        <input type="range" id="bgm-volume" min="0" max="1" step="0.01" value="0.5">
      </div>

      <div class="setting-item">
        <label for="se-volume">SE éŸ³é‡</label>
        <input type="range" id="se-volume" min="0" max="1" step="0.01" value="0.5">
      </div>

      <div class="setting-item">
        <label for="bgm-select">BGM é¸æŠ</label>
        <select id="bgm-select">
          <option value="bgm1.mp3">ç©ã‚„ã‹ãªæ›²</option>
          <option value="bgm2.mp3">ãƒãƒˆãƒ«æ›²</option>
          <option value="bgm3.mp3">ç¥ç§˜çš„ãªæ›²</option>
        </select>
      </div>
    </div>

    <div class="tab-content" id="howto-tab" style="display: none;">
      <h2>éŠã³æ–¹</h2>
      <p>ã‚²ãƒ¼ãƒ ã®æ“ä½œæ–¹æ³•ã‚„ç›®çš„ã‚’ã“ã“ã«æ›¸ãã¾ã™ã€‚</p>
      <ul>
        <li>â†‘â†â†“â†’ã‚­ãƒ¼ã§ã‚­ãƒ£ãƒ©ç§»å‹•</li>
        <li>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§æ”»æ’ƒ</li>
        <li>æ•µã‚’å€’ã—ã¦ã‚¹ã‚³ã‚¢ã‚’ç¨¼ã”ã†</li>
      </ul>
    </div>

    <div class="tab-content" id="credits-tab" style="display: none;">
      <h2>ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</h2>
      <p>åˆ¶ä½œï¼šã¿ã‚†ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰</p>
      <p>éŸ³æ¥½ç´ æï¼šé­”ç‹é­‚ã€DOVA-SYNDROME</p>
      <p>ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼šFlask, HTML/CSS/JavaScript</p>
      <p>Special Thanksï¼šã‚µãƒãƒ¼ãƒˆã—ã¦ãã‚ŒãŸå…¨ã¦ã®äººãŸã¡</p>
    </div>
  </div>

  <audio id="se" src="/static/audio/se.mp3"></audio>

  <!-- å±¥æ­´ä¿å­˜ãƒ»å‰Šé™¤ã‚’ä¸­å¤®ã« -->
    <div class="history-settings">
      <label>
        <input type="checkbox" id="saveToggle">
        å±¥æ­´ã‚’ä¿å­˜ã™ã‚‹
      </label>
      <button id="clearHistoryBtn">å±¥æ­´ã‚’å‰Šé™¤ã™ã‚‹</button>
    </div>

  <!-- å‰Šé™¤ç¢ºèªï¼é€šçŸ¥ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="deleteConfirmModal" class="modal hidden">
    <div class="modal-content">
      <p id="modalMessage">æœ¬å½“ã«å±¥æ­´ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</p>
      <div class="modal-buttons">
        <button id="confirmDelete">ã¯ã„</button>
        <button id="cancelDelete">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      </div>
    </div>
  </div>

  <script>
    const bgmFrame = document.getElementById('bgm-frame');
    let bgmAudio;

    // iframe èª­ã¿è¾¼ã¿å¾Œã«å–å¾—
    bgmFrame.addEventListener('load', () => {
      bgmAudio = bgmFrame.contentWindow.document.getElementById('bgm');

      // åˆå›ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã§å†ç”Ÿé–‹å§‹ï¼ˆiOS/Chrome å¯¾ç­–ï¼‰
      const startAudio = () => {
        bgmAudio.play().catch(() => {});
        document.body.removeEventListener('click', startAudio);
        document.body.removeEventListener('touchstart', startAudio);
      };
      document.body.addEventListener('click', startAudio);
      document.body.addEventListener('touchstart', startAudio);
    });
  </script>

  <script src="/static/scripts/setting.js"></script>

  <script>
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    tabButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        tabButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const target = btn.dataset.tab;
        tabContents.forEach(content => {
          content.style.display = content.id === target ? 'block' : 'none';
        });
      });
    });
  </script>
<!-- ğŸµ BGMç”¨iframeï¼ˆéè¡¨ç¤ºï¼‰ -->
<iframe src="/bgm" style="display:none;" id="bgm-frame"></iframe>
</body>
</html>